{
  "name": "karka",
  "version": "0.0.1",
  "description": "A simple rule parser",
  "main": "index.js",
  "keywords": [
    "dustjs",
    "express",
    "nodejs"
  ],
  "repository": {
    "type": "git",
    "url": "https://github.com/krakenjs/karka.git"
  },
  "author": {
    "name": "Poornima Venkatakrishnan",
    "email": "pvenkatakrishnan@paypal.com"
  },
  "dependencies": {
    "shortstop": "0.0.1",
    "shortstop-handlers": "~0.1.0",
    "jshint": "~2.4.4"
  },
  "devDependencies": {
    "mocha": "~1.9.0",
    "chai": "~1.5.0",
    "grunt": "~0.4.2",
    "grunt-contrib-clean": "~0.5.0",
    "grunt-contrib-jshint": "~0.8.0",
    "grunt-simple-mocha": "~0.4.0",
    "istanbul": "~0.2.6",
    "jshint": "~2.4.4"
  },
  "scripts": {
    "test": "grunt test",
    "cover": "istanbul cover _mocha -- test/*.js -R spec",
    "lint": "jshint -c .jshintrc index.js lib/"
  },
  "readme": "A Simple Rule Parsing module [![Build Status](https://travis-ci.org/paypal/kraken-js.png)](https://travis-ci.org/pvenkatakrishnan/karka)\n============================\n\nGiven a rule in a specified format, the context (in which the rule matching is invoked), this module will resolve a key to a value if the context satisifes the rules.\n\nA simple usage:\n\n```javascript\nvar karka = require('karka'),\n    config = {\n        'foo' : [\n            {\n                'is': 'bar',\n                'when': {\n                    'hakunamatata': 'It-Means-No-Worries'\n                }\n            }\n        ],\n        'ying': [\n            {\n                'is': 'yang',\n                'when': {\n                    'secret': 'There-Is-None'\n                }\n            }\n\n        ]\n    },\n    context = {\n        'hakunamatata': 'It-Means-No-Worries',\n        'secret': 'There-Is-None'\n    },\n    spcl  = karka.create(config),\n\n    //mappedName = 'bar'\n    mappedName = spcl.resolve('foo', context),\n\n    //maps = {'foo': 'bar', 'ying': 'yang'}\n    maps = spcl.resolveAll(context);\n```\n\nAs you can see a single key like 'foo' can be mapped to an array of possible matches, each with their own rule set.\nThe first spec that has all rules satisfied the context will be picked. Simply put it matches with a swtich case mentality. SO it is important to remember to place the one with highest specifity on the top of the array.\n\n##### Different ways to specify the config resolution:\nThe above example assumes that the rule values are directly available in the context object.\nBut fear not there are multiple ways the rules can be resolved.\n\n* If you would like to specify a module/file that custom implements the rule resolution (that can be resolved using require):\n```javascript\nvar config = {\n    'foo' : [\n        {\n            'is': 'bar',\n            'when': {\n                'hakunamatata': 'It-Means-No-Worries'\n            },\n            'use': 'require:./I/am/a/file'\n        }\n    ]\n};\n\n//(or)\n\nvar config = {\n    'foo' : [\n        {\n            'is': 'bar',\n            'when': {\n                'hakunamatata': 'It-Means-No-Worries'\n            },\n            'use': 'require:I-am-a-module'\n        }\n    ]\n};\n\n```\n* If you would like to specify a factory method in a module/file that does the rule resolution:\n```javascript\nvar config = {\n    'foo' : [\n        {\n            'is': 'bar',\n            'when': {\n                'hakunamatata': 'It-Means-No-Worries'\n            },\n            'use':'exec:./I/am/a/file#ruleEvaluator'\n        }\n    ]\n};\n```\n##### Different ways to specify the context in config:\n* To specify the context in a nested object under the context object:\n```javascript\nvar config = {\n        'ying' : [\n            {\n                'is': 'yang',\n                'when': {\n                    'state.of.mind.is': 'peaceful'\n                }\n            }\n        ]\n    },\n    context  = {\n        'state': {\n            'of': {\n                'mind': {\n                    'is': 'peaceful'\n                }\n            }\n        }\n    }\n```\n* To specify multiple rules to be satisfied\n```javascript\nvar config = {\n        'ying' : [\n            {\n                'is': 'yang',\n                'when': {\n                    'state.of.mind.is': 'peaceful',\n                    'state.of.body.is': 'active',\n                    'mood.is': 'happy'\n                }\n            }\n        ]\n    };\n```\n* To specify multiple values for a rule in the config and want at least one value matched in your context\n```javascript\nvar config = {\n        'ying' : [\n            {\n                'is': 'yang',\n                'when': {\n                    'state.of.mind': 'peaceful',\n                    'state.of.body': 'active'\n                    'mood': ['happy', 'elated', 'ecstatic', 'jubilant']\n                }\n            }\n        ]\n    },\n    context  = {\n        'state': {\n            'of': {\n                'mind': 'peaceful'\n            }\n        },\n        'state': {\n            'of': {\n                'body': 'active'\n            }\n        },\n        'mood': 'jubilant'\n    };\n\n    //if mood in context matches at least one of the moods in config along with other rules, the rule is a match\n    //ying maps to yang when:\n        //state.of.mind = 'peaceful'\n        //AND\n        //state.of.body = 'active'\n        //AND\n        //mood = 'happy' OR 'elated' OR 'ecstatic' OR 'jubilant'\n```\n\n\n* To have multiple values for a rule in the config and you want to specify a complex and/or rule to match against your context\n```javascript\nvar config = {\n        'ying' : [\n            {\n                'is': 'yang',\n                'when': {\n                    'state.of.mind': 'peaceful',\n                    'state.of.body': 'active',\n                    'mood': [['happy', 'calm'], 'joyous']\n                }\n            },\n            {\n                'is': 'bong',\n                'when' : {\n                    'state.of.mind': 'peaceful',\n                    'state.of.body': 'active'\n                    'mood': [['jubilant', 'outrageous'],['ecstatic', 'crazy']]\n                }\n            }\n        ]\n    },\n    context  = {\n        'state': {\n            'of': {\n                'mind': 'peaceful'\n            }\n        },\n        'state': {\n            'of': {\n                'body': 'active'\n            }\n        },\n        'mood': ['jubilant', 'outrageous']\n    };\n\n    //In the above case context matches the rule that maps 'ying' to 'bong'\n    //What the above config means is:\n    //'ying' will resolve to 'yang' when\n            //state.of.mind = peaceful\n            //AND\n            //state.of.body = 'active'\n            //AND\n            //mood = ('happy' AND 'calm') OR 'joyous\n    //'ying will resolve to 'bong' when\n            //state.of.mind = peaceful\n            //AND\n            //state.of.body = 'active'\n            //AND\n            //mood = ('jubilant' AND 'outrageous') OR ('ecstatic' AND 'crazy')\n```\n",
  "readmeFilename": "readme.md",
  "bugs": {
    "url": "https://github.com/krakenjs/karka/issues"
  },
  "_id": "karka@0.0.1",
  "dist": {
    "shasum": "78ee0677f22eebba567e0476c75e912aa98f52b8"
  },
  "_from": "karka@~0.0.1",
  "_resolved": "https://registry.npmjs.org/karka/-/karka-0.0.1.tgz"
}
